import urllib
import json
import string

from flask import Flask, render_template_string, redirect, url_for

from better_game_ideas import makeGamePitch

app = Flask("game_ideas")

TEMPLATE = """
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Better Game Ideas</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
    <style media="screen">
        @font-face {
          font-family: 'tweetstorm-icons';
          src: url('data:application/octet-stream;base64,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') format('woff'),
               url('data:application/octet-stream;base64,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') format('truetype');
        }
        body {
          font-family: 'Montserrat', sans-serif;
        }
        .tweet-idea, .github {
          font-family: 'tweetstorm-icons';
        }
        div.idea-container {
          margin: auto;
          max-width: 800px;
          position: relative;
        }
        div.game-idea {
          font-size: 400%;
          color: #3c3c3c;
        }
        div.decorator {
          float: right;
          font-size: xx-large;
        }
        div.decorator a {
          color: #3c3c3c;
          text-decoration: none;
          padding-right: 5px;
        }
        div.random {
          text-align: center;
          margin-left: auto;
          margin-right: auto;
          margin-top: 100px;
          font-size: 250%;
        }
        div.random a {
          color: #000469;
        }
        div.github {
          text-align: center;
          margin-left: auto;
          margin-right: auto;
          margin-top: 170px;
          font-size: 125%;
        }
        div.github a {
          color: #707070;
        }
    </style>
  </head>
  <body>
    <div class="idea-container">
        <div class="game-idea">
          {{ pitch }}
        </div>
        <div class="tweet-idea decorator">
            <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text={{tweet}}">
                &#xf304;
            </a>
        </div>
        <div class="permalink decorator">
            <a href="./{{ seed }}">#</a>
        </div>
    </div>
    <div class="random">
      <a href="./">Get another better game idea!</a>
    </div>
    <div class="github">
      <a href="https://github.com/sjml/better-game-ideas">&#xf300</a>
  </body>
</html>
"""

conf = json.load(open("webconfig.json", "r"))
BASE_URL = "/"
if "baseURL" in conf:
    BASE_URL = conf["baseURL"]


@app.route("/")
@app.route("/<seed>")
@app.route("/<path:seed>")
def game_idea(seed=None):
    if seed != None and len(seed) != 16:
        if not all(character in string.hexdigits for character in seed):
            return redirect(url_for('game_idea', seed=None))

    pitch, theSeed = makeGamePitch(seed)
    permalink = BASE_URL + theSeed
    tweet = urllib.quote_plus("%s %s" % (pitch, permalink))
    return render_template_string(TEMPLATE, pitch=pitch, seed=theSeed, tweet=tweet)

if __name__ == '__main__':
    app.run(debug=True)
